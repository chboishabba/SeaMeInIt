$schema: "https://json-schema.org/draft/2020-12/schema"
id: "https://seameinit.dev/schemas/body_unified.json"
title: "Unified Human Body Specification"
description: >-
  Schema describing anthropometric measurements, anatomical landmarks, skeletal
  joint hierarchy, and normative motion ranges used across SeaMeInIt pipelines.
type: object
required:
  - metadata
  - anatomical_landmarks
  - measurements
  - joints
  - motion_ranges
additionalProperties: false
properties:
  metadata:
    type: object
    required:
      - schema_version
      - coordinate_frame
      - unit_system
      - source
    additionalProperties: false
    properties:
      schema_version:
        type: string
        pattern: '^v?[0-9]+\.[0-9]+\.[0-9]+$'
        description: Semantic version of the schema definition.
      coordinate_frame:
        type: string
        enum:
          - smii_body_local
          - smii_world
        description: >-
          Identifier for the right-handed coordinate frame used to express
          anatomical landmark positions and joint axes.
      unit_system:
        type: string
        enum:
          - metric
        default: metric
        description: Global unit system assumed for all numeric values.
      source:
        type: string
        description: Provenance of the definition (dataset, study, or author).
      notes:
        type: string
        description: Optional free-form notes about the body description.
  anatomical_landmarks:
    type: array
    description: Canonical landmarks used for measurements and joint anchoring.
    minItems: 1
    uniqueItems: true
    items:
      $ref: "#/$defs/anatomicalLandmark"
  measurements:
    type: array
    description: Anthropometric measurement definitions referencing landmarks.
    minItems: 1
    items:
      $ref: "#/$defs/measurement"
  joints:
    type: array
    description: Skeletal joints arranged in a rooted hierarchy.
    minItems: 1
    items:
      $ref: "#/$defs/joint"
  motion_ranges:
    type: array
    description: Default joint motion ranges expressed in degrees.
    minItems: 1
    items:
      $ref: "#/$defs/motionRange"
$defs:
  identifier:
    type: string
    pattern: '^[a-z][a-z0-9_\-\.]*$'
  anatomicalLandmark:
    type: object
    required:
      - id
      - name
      - region
      - description
    additionalProperties: false
    properties:
      id:
        $ref: "#/$defs/identifier"
      name:
        type: string
        minLength: 1
      synonyms:
        type: array
        items:
          type: string
          minLength: 1
        uniqueItems: true
      region:
        type: string
        enum:
          - head
          - neck
          - torso
          - pelvis
          - upper_limb
          - lower_limb
        description: Body region grouping for high-level organization.
      description:
        type: string
      coordinate_frame:
        type: string
        enum:
          - smii_body_local
          - smii_world
        description: Optional override when a landmark is defined in another frame.
      default_position:
        type: object
        required:
          - x
          - y
          - z
        additionalProperties: false
        properties:
          x:
            type: number
          y:
            type: number
          z:
            type: number
        description: Nominal position of the landmark relative to the coordinate frame.
  measurement:
    type: object
    required:
      - id
      - name
      - category
      - unit
      - primary_landmarks
    additionalProperties: false
    properties:
      id:
        $ref: "#/$defs/identifier"
      name:
        type: string
        minLength: 1
      description:
        type: string
      category:
        type: string
        enum:
          - length
          - circumference
          - breadth
          - depth
          - angle
          - mass
      unit:
        type: string
        enum:
          - mm
          - cm
          - m
          - kg
          - deg
      primary_landmarks:
        type: array
        minItems: 1
        items:
          $ref: "#/$defs/identifier"
        uniqueItems: true
        description: Required landmarks that define the measurement anchors.
      secondary_landmarks:
        type: array
        items:
          $ref: "#/$defs/identifier"
        uniqueItems: true
        description: Optional supporting landmarks for context or plane alignment.
      acquisition_method:
        type: string
        enum:
          - manual_tape
          - laser_scan
          - photographic
          - inertial
          - computed
        description: Primary method used to acquire the measurement.
      notes:
        type: string
  joint:
    type: object
    required:
      - id
      - name
      - parent
      - type
      - landmarks
    additionalProperties: false
    properties:
      id:
        $ref: "#/$defs/identifier"
      name:
        type: string
        minLength: 1
      parent:
        oneOf:
          - type: "null"
          - $ref: "#/$defs/identifier"
        description: Null indicates the root joint of the hierarchy.
      type:
        type: string
        enum:
          - ball_and_socket
          - hinge
          - pivot
          - condyloid
          - saddle
          - planar
      landmarks:
        type: array
        minItems: 1
        items:
          $ref: "#/$defs/identifier"
        uniqueItems: true
        description: Landmarks anchoring the joint center or axes.
      degrees_of_freedom:
        type: integer
        minimum: 1
        maximum: 6
        default: 3
      default_axis_directions:
        type: array
        minItems: 1
        items:
          type: string
          enum:
            - x
            - y
            - z
        uniqueItems: true
        description: Cardinal axes describing the order of rotation or translation.
      notes:
        type: string
  motionRange:
    type: object
    required:
      - joint
      - axes
    additionalProperties: false
    properties:
      joint:
        $ref: "#/$defs/identifier"
      posture:
        type: string
        enum:
          - neutral
          - seated
          - standing
          - custom
        default: neutral
      axes:
        type: array
        minItems: 1
        items:
          type: object
          required:
            - axis
            - min
            - max
            - unit
          additionalProperties: false
          properties:
            axis:
              type: string
              enum:
                - flexion_extension
                - abduction_adduction
                - internal_external_rotation
                - pronation_supination
                - inversion_eversion
                - translation_x
                - translation_y
                - translation_z
            min:
              type: number
            max:
              type: number
            neutral:
              type: number
            unit:
              type: string
              enum:
                - deg
                - mm
      notes:
        type: string
x-measurements:
  version: "1.0.0"
  description: Schema enumerating manual tape measurements and scan landmarks required for SMPL-X fitting.
  manual:
    - name: height
      unit: cm
      required: true
      category: length
      description: Standing height measured from floor to top of head.
    - name: weight
      unit: kg
      required: false
      category: mass
      description: Body mass including clothing worn during scan session.
    - name: chest_circumference
      unit: cm
      required: true
      category: circumference
      description: Horizontal circumference measured at mid-chest passing through the nipples.
    - name: waist_circumference
      unit: cm
      required: true
      category: circumference
      description: Horizontal circumference at the narrowest part of the torso above the iliac crest.
    - name: hip_circumference
      unit: cm
      required: true
      category: circumference
      description: Circumference at the fullest part of the hips and glutes.
    - name: neck_circumference
      unit: cm
      required: false
      category: circumference
      description: Circumference at the base of the neck passing through the larynx.
    - name: shoulder_width
      unit: cm
      required: false
      category: length
      description: Biacromial shoulder width measured between left and right acromion processes.
    - name: arm_length
      unit: cm
      required: false
      category: length
      description: Distance from the acromion to the wrist along the lateral arm.
    - name: inseam_length
      unit: cm
      required: false
      category: length
      description: Distance from the crotch to the floor along the medial leg.
    - name: thigh_circumference
      unit: cm
      required: false
      category: circumference
      description: Circumference of the thigh measured 10 cm below the inguinal fold.
    - name: calf_circumference
      unit: cm
      required: false
      category: circumference
      description: Circumference at the fullest part of the calf.
    - name: bicep_circumference
      unit: cm
      required: false
      category: circumference
      description: Circumference of the upper arm midway between shoulder and elbow.
    - name: wrist_circumference
      unit: cm
      required: false
      category: circumference
      description: Circumference measured over the styloid processes.
  scan_landmarks:
    - name: head_top
      unit: mm
      required: true
      description: Vertex of the skull used for global scaling.
    - name: sternum_notch
      unit: mm
      required: true
      description: Jugular notch at the superior sternum.
    - name: navel
      unit: mm
      required: true
      description: Center of the navel for anterior torso alignment.
    - name: sacrum
      unit: mm
      required: true
      description: Posterior pelvis landmark at the sacrum.
    - name: left_acromion
      unit: mm
      required: true
      description: Left shoulder acromion used for arm pose initialization.
    - name: right_acromion
      unit: mm
      required: true
      description: Right shoulder acromion used for arm pose initialization.
    - name: left_iliac_crest
      unit: mm
      required: false
      description: Left iliac crest peak to stabilize pelvic orientation.
    - name: right_iliac_crest
      unit: mm
      required: false
      description: Right iliac crest peak to stabilize pelvic orientation.
    - name: left_wrist
      unit: mm
      required: false
      description: Ulnar styloid process for lower arm alignment.
    - name: right_wrist
      unit: mm
      required: false
      description: Radial styloid process for lower arm alignment.
    - name: left_ankle
      unit: mm
      required: false
      description: Medial malleolus of the left ankle.
    - name: right_ankle
      unit: mm
      required: false
      description: Medial malleolus of the right ankle.
